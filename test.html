<!DOCTYPE html>
<html>
  <head>
    <title>Simu Carte</title>
    <style>
      #map {
        height: 500px;
        width: 100%;
      }
    </style>
  </head>
  <body>
    <h2>Carte avec position simulée</h2>
    <div id="map"></div>

    <script>
      let map, marker;
      let lat = 48.8566; // Point de départ : Paris
      let lng = 2.3522;

      function simulateMovement() {
        lat += (Math.random() - 0.5) * 0.001;
        lng += (Math.random() - 0.5) * 0.001;
        const pos = { lat, lng };
        console.log({lat});
        console.log({lng});

        marker.setPosition(pos);
        map.setCenter(pos);
      }

      function initMap() {
        const startPos = { lat, lng };

        map = new google.maps.Map(document.getElementById("map"), {
          zoom: 15,
          center: startPos,
        });

        marker = new google.maps.Marker({
          position: startPos,
          map,
        });

        setInterval(simulateMovement, 3000); // bouge toutes les 3s
      }
    </script>

    <script async
      src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCNtUtilPmq8jbe-R2qYOvrL99yOMDEPpQ&callback=initMap">
    </script>
  </body>
</html>


<!-- // ------------------------------------------------------------------------------------------------------------------- \\ -->

// ngOnInit(): void {
  //   if (!navigator.geolocation) {
  //     console.log('not location');
  //   }
  //   navigator.geolocation.getCurrentPosition((position) => {
  //     console.log(
  //       `lat: ${position.coords.latitude}, lon: ${position.coords.longitude}`
  //     );
  //   });
  //   this.watchPosition();
  // }

  // watchPosition() {
  //   let desLat = 0;
  //   let desLon = 0;
  //   let id = navigator.geolocation.watchPosition((position) => {
  //     console.log(
  //       `lat: ${position.coords.latitude}, lon: ${position.coords.longitude}`
  //     );
  //     if(position.coords.latitude === desLat){
  //       navigator.geolocation.clearWatch(id);
  //     }
  //   }, (err) => {
  //     console.log(err);
  //   }, {
  //     enableHighAccuracy: true,
  //     timeout: 5000,
  //     maximumAge: 0
  //   })
  // }
